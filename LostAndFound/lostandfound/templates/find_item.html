<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Local School Lost & Found</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/find.css') }}">
</head>
<body>
     <header>
        <div class="header-left">
            <h1>Find a Lost Item</h1>
        </div>

        <div class="header-center">
            <a href="{{ url_for('submit_item') }}" class="btn">Submit an Item</a>
        </div>

        <div class="header-right">
            <a href="{{ url_for('homepage_en') }}" class="btn">üè† Back to Homepage</a>
        </div>
    </header>

    <main>
        <div class="box2">
            <div class="table-container">
                <table border="1" cellpadding="10">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Date</th>
                            <th>Item Type</th>
                            <th>Description</th>
                            <th>Photo</th>
                            <th>Status</th>
                            <th>Returned To</th>
                            <th>Claim</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for item in items %}
                        <tr>
                            <td>{{ item["ID"] }}</td>
                            <td>{{ item["Date"] }}</td>
                            <td>{{ item["Item Type"] }}</td>
                            <td>{{ item["Description"] }}</td>
                            <td>
                                {% if item["Photo Path"] %}
                                    <img src="{{ url_for('static', filename=item['Photo Path']) }}" alt="Item" width="75" height="75">
                                {% else %}
                                    No Photo
                                {% endif %}
                            </td>
                            <td>{{ item["Status"] }}</td>
                            <td>{{ item["Returned To"] or "" }}</td>
                            <td>
                                {% if item["Status"] != "Claimed" %}
                                    <!-- Claim button with prompt -->
                                    <form action="{{ url_for('claim_item', item_id=item['ID']) }}" method="post" onsubmit="
                                        var name = prompt('Enter your name to claim this item:');
                                        if (!name) { return false; }
                                        var hidden = document.createElement('input');
                                        hidden.type = 'hidden';
                                        hidden.name = 'returned_to';
                                        hidden.value = name;
                                        this.appendChild(hidden);
                                        return true;
                                    ">
                                        <button type="submit" class="btn">Claim</button>
                                    </form>
                                {% else %}
                                    <!-- Unclaim button -->
                                    <form action="{{ url_for('unclaim_item', item_id=item['ID']) }}" method="post">
                                        <button type="submit" class="btn" style="background-color: #ff6666;">Unclaim</button>
                                    </form>
                                {% endif %}
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </main>

    <footer>
        <p>Contact us: 
            <a href="mailto:support@lostandfound.fi">support@xxxxxx.fi</a> | 
            <a href="tel:+358401234567">+358 40 xxx xxxx</a>
        </p>
        <p>&copy; 2025 Lost & Found</p>
    </footer>
</body>
</html>